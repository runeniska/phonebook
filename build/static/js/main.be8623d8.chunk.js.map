{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","functions","getAll","axios","get","then","response","data","create","newObject","post","update","updateObject","url","id","put","del","delete","Filter","search","searchNames","value","onChange","PersonForm","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setMessage","handleNameChange","handleNumberChange","onSubmit","event","preventDefault","nameExists","map","person","name","includes","personObject","number","window","confirm","existingPerson","find","p","updatedPerson","personService","returnedPersonObject","setTimeout","catch","error","console","log","filter","concat","type","Persons","results","toLocaleLowerCase","onClick","_","deletePerson","Notification","message","className","App","useState","setSearch","useEffect","initialPersons","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.be8623d8.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = updateObject => {\n  const url = baseUrl + '/' + updateObject.id\n  const request = axios.put(url, updateObject)\n  return request.then(response => response.data)\n}\n\nconst del = id => {\n  const url = baseUrl + '/' + id\n  const request = axios.delete(url)\n  return request.then(response => response.data)\n}\n\nconst functions = { getAll, create, update, del }\n\nexport default functions","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst Filter = ({ search, searchNames }) => {\n  return (\n    <div>\n      Filter shown with <input value={search} onChange={searchNames}/>\n    </div>\n  )\n}\n\nconst PersonForm = ({\n  persons, setPersons,\n  newName, setNewName,\n  newNumber, setNewNumber,\n  setMessage,\n  handleNameChange,\n  handleNumberChange\n  }) => {\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameExists = persons.map( person => person.name ).includes(newName)\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (nameExists) {\n      const proceed = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (proceed) {\n        const existingPerson = persons.find(p => p.name === newName)\n        const updatedPerson = {...existingPerson, number: newNumber}\n        personService\n          .update(updatedPerson)\n          .then(returnedPersonObject => {\n            setNewName('')\n            setNewNumber('')\n            setPersons(persons.map(person => {\n              return person.id !== existingPerson.id ? person : returnedPersonObject\n            }))\n            setMessage(`Contact '${existingPerson.name}' was updated successfully`)\n            setTimeout(() => setMessage(null), 5000)\n          })\n          .catch(error => {\n            console.log(error)\n            setMessage(`Information of '${existingPerson.name}' has already been removed from server`)\n            setTimeout(() => setMessage(null), 5000)\n            setPersons(persons.filter(person => person.id !== existingPerson.id))\n          })\n      }\n    } else {\n      personService\n        .create(personObject)\n        .then(returnedPersonObject => {\n          setNewName('')\n          setNewNumber('')\n          setPersons(persons.concat(returnedPersonObject))\n          setMessage(`Contact '${personObject.name}' was added successfully`)\n          setTimeout(() => setMessage(null), 5000)\n        })\n        .catch(error => {\n          console.log(error.response.data)\n          setMessage(`${error.response.data.error}`)\n          setTimeout(() => setMessage(null), 10000)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <form onSubmit={addPerson}>\n          <div>\n            name: <input value={newName} onChange={handleNameChange} />\n          </div>\n          <div>\n            number: <input value={newNumber} onChange={handleNumberChange}/>\n          </div>\n          <div>\n            <button type=\"submit\">add</button>\n          </div>\n        </form>\n    </div>\n  )\n}\n\nconst Persons = ({ persons, setPersons, search, setMessage }) => {\n  const results = persons.filter( person =>\n    person.name.toLocaleLowerCase().includes(search.toLocaleLowerCase())\n  )\n\n  const deletePerson = (person) => {\n    const proceed = window.confirm(`Delete ${person.name}?`)\n\n    if (proceed) {\n      personService\n        .del(person.id)\n        .then(_ => {\n          setMessage(`Contact '${person.name}' was removed successfully`)\n          setTimeout(() => setMessage(null), 5000)\n        })\n        .catch(_ => console.log(`${person.name} is removed already`))\n\n      setPersons(persons.filter(p => p.id !== person.id))\n    }\n  }\n\n  return (\n    <div>\n      <ul>\n        {results.map( person =>\n          <li key={person.name}>\n            {person.name} {person.number} <button onClick={() => deletePerson(person)}>delete</button>\n          </li>\n        )}\n      </ul>\n    </div>\n  )\n}\n\nconst Notification = ({ message }) => {\n  if (!message) {\n    return null\n  }\n\n  if (message.includes('success')) {\n    return (\n      <div className=\"success\">\n        {message}\n      </div>\n    )\n  } else {\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ search, setSearch ] = useState('')\n  const [ message, setMessage ] = useState('')\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const handleSearchChange = (event) => setSearch(event.target.value)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n      .catch(_ => console.log('Cannot fetch contacts from server'))\n  }, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter search={search} searchNames={handleSearchChange} />\n      <h2>Add new contact</h2>\n      <PersonForm\n        persons={persons} setPersons={setPersons}\n        newName={newName} setNewName={setNewName}\n        newNumber={newNumber} setNewNumber={setNewNumber}\n        setMessage={setMessage}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons}\n        setPersons={setPersons}\n        search={search}\n        setMessage={setMessage}\n      />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}