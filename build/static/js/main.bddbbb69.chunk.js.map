{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","functions","getAll","axios","get","then","response","data","create","newObject","post","update","updateObject","url","id","put","del","delete","Filter","search","searchNames","value","onChange","PersonForm","props","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","Persons","persons","setPersons","setMessage","results","filter","person","name","toLocaleLowerCase","includes","map","number","onClick","window","confirm","personService","_","setTimeout","catch","console","log","p","deletePerson","Notification","message","className","App","useState","setNewName","setNewNumber","setSearch","useEffect","initialPersons","event","target","preventDefault","nameExists","personObject","existingPerson","find","updatedPerson","returnedPersonObject","error","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bddbbb69.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = updateObject => {\n  const url = baseUrl + '/' + updateObject.id\n  const request = axios.put(url, updateObject)\n  return request.then(response => response.data)\n}\n\nconst del = id => {\n  const url = baseUrl + '/' + id\n  const request = axios.delete(url)\n  return request.then(response => response.data)\n}\n\nconst functions = { getAll, create, update, del }\n\nexport default functions","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst Filter = ({ search, searchNames }) => {\n  return (\n    <div>\n      Filter shown with <input value={search} onChange={searchNames}/>\n    </div>\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <div>\n      <form onSubmit={props.addPerson}>\n          <div>\n            name: <input value={props.newName} onChange={props.handleNameChange} />\n          </div>\n          <div>\n            number: <input value={props.newNumber} onChange={props.handleNumberChange}/>\n          </div>\n          <div>\n            <button type=\"submit\">add</button>\n          </div>\n        </form>\n    </div>\n  )\n}\n\nconst Persons = ({ persons, setPersons, search, setMessage }) => {\n  const results = persons.filter( person =>\n    person.name.toLocaleLowerCase().includes(search.toLocaleLowerCase())\n  )\n\n  const deletePerson = (person) => {\n    const proceed = window.confirm(`Delete ${person.name}?`)\n\n    if (proceed) {\n      personService\n        .del(person.id)\n        .then(_ => {\n          setMessage(`Contact '${person.name}' was removed successfully`)\n          setTimeout(() => setMessage(null), 5000)\n        })\n        .catch(_ => console.log(`${person.name} is removed already`))\n\n      setPersons(persons.filter(p => p.id !== person.id))\n    }\n  }\n\n  return (\n    <div>\n      <ul>\n        {results.map( person =>\n          <li key={person.name}>\n            {person.name} {person.number} <button onClick={() => deletePerson(person)}>delete</button>\n          </li>\n        )}\n      </ul>\n    </div>\n  )\n}\n\nconst Notification = ({ message }) => {\n  if (!message) {\n    return null\n  }\n\n  if (message.includes('success')) {\n    return (\n      <div className=\"success\">\n        {message}\n      </div>\n    )\n  } else {\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ search, setSearch ] = useState('')\n  const [ message, setMessage ] = useState('')\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const handleSearchChange = (event) => setSearch(event.target.value)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n      .catch(_ => console.log('Cannot fetch contacts from server'))\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameExists = persons.map( person => person.name ).includes(newName)\n    const numberExists = persons.map( person => person.number ).includes(newNumber)\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (nameExists) {\n      const proceed = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (proceed) {\n        const existingPerson = persons.find(p => p.name === newName)\n        const updatedPerson = {...existingPerson, number: newNumber}\n        personService\n          .update(updatedPerson)\n          .then(returnedPersonObject => {\n            setNewName('')\n            setNewNumber('')\n            setPersons(persons.map(person => {\n              return person.id !== existingPerson.id ? person : returnedPersonObject\n            }))\n            setMessage(`Contact '${existingPerson.name}' was updated successfully`)\n            setTimeout(() => setMessage(null), 5000)\n          })\n          .catch(error => {\n            console.log(error)\n            setMessage(`Information of '${existingPerson.name}' has already been removed from server`)\n            setTimeout(() => setMessage(null), 5000)\n            setPersons(persons.filter(person => person.id !== existingPerson.id))\n          })\n      }\n    } else {\n      personService\n        .create(personObject)\n        .then(returnedPersonObject => {\n          setNewName('')\n          setNewNumber('')\n          setPersons(persons.concat(returnedPersonObject))\n          setMessage(`Contact '${personObject.name}' was added successfully`)\n          setTimeout(() => setMessage(null), 5000)\n        })\n        .catch(error => {\n          console.log(error.response.data)\n          setMessage(`${error.response.data.error}`)\n          setTimeout(() => setMessage(null), 10000)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter search={search} searchNames={handleSearchChange} />\n      <h2>Add new contact</h2>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons}\n        setPersons={setPersons}\n        search={search}\n        setMessage={setMessage}\n      />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}